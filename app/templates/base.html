{% load static %}
<!doctype html>
<html lang="pt-BR">
<link rel="shortcut icon" type="image/png" href="{% static 'imagem_site/favicon.ico' %}"/>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous"> <!-- BootStrap -->
    <link rel="stylesheet" href="{% static 'usuarios/css/css.css' %}"> <!-- Pasta do projeto CSS -->
    <script src="{% static 'js/scripts.js' %}" defer></script> <!-- Pasta do projeto Scripts do Js -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> <!-- Jquery 2-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script> <!-- BootStrap 3-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- Alertas -->
    {% block 'head' %}

    {% endblock %}
    <title>{% block 'title' %} Merceria Comunitária {% endblock %}</title>
</head>
<body class="fundo">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <img src="{% static 'imagem_site/aparecida.png' %}" width="40" height="40" class="d-inline-block align-top" alt="">
            <a class="navbar-brand fw-bold mb2 text-uppercase" href="{% url 'home' %}"><font color="RoyalBlue"><strong>&nbspMercearia Comunitária</strong></font></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <!--<div class="navbar-nav">
                <a class="nav-item nav-link active" href="{% url 'home' %}">Home</a>
            </div>-->
            </div>
            {% if user.is_authenticated %}
                {% if user.cargo == "A" %}
                    <div><font color="gold">Admin</font></div>
                {%elif user.cargo == "P"%}
                    <div><font color="gold">Padre</font></div>
                {%elif user.cargo == "CF"%}
                    <div><font color="gold">Casal Festa</font></div>
                {%elif user.cargo == "CL"%}
                    <div><font color="gold">Casal Lojinha</font></div>
                {%elif user.cargo == "V"%}
                    <div><font color="gold">Vendedor</font></div>
                {%elif user.cargo == "C"%}
                    <div><font color="gold">Caixa</font></div>
                {% endif %} 
                &nbsp
                &nbsp
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {{user.username}}
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        {% if user.cargo != "T" %}
                        <a class="dropdown-item" href="{% url 'password_reset_login' %}">Alterar Senha</a>
                        {% endif %}
                        <a class="dropdown-item" href="{% url 'logout'%}">Sair</a>
                    </div>
                </div>
            {% endif %}
        </nav>

    {% block 'body' %}
    {% endblock %}
    
    <footer class="main-footer">
    </footer>
    {% if messages %} 
        {% for message in messages%}
                <script>//Enviando as mensagens da tela.
                    const Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 10000, //10 segundos para sumir
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', () => {
                            Swal.stopTimer(); // Pausar o timer ao passar o mouse sobre a mensagem
                        });
                        toast.addEventListener('mouseleave', () => {
                            Swal.resumeTimer(); // Retomar o timer quando o mouse sair da mensagem
                        });
                    }
                    })
                    d = '{{message.tags}}'.toLowerCase()//type
                    if (d == "alert-danger"){
                        d = 'error'
                    }
                    if (d == "alert-success"){
                        d = 'success'
                    }
                    if (d == "alert-info"){
                        d = 'question'
                    }
                    // if (d == "alert-success"){
                    //     d = 'success'
                    // }
                    // if (d == "alert-success"){
                    //     d = 'success'
                    // }
                    Toast.fire({
                    icon: d,
                    title: '{{message}}'
                    })
                </script>
        {% endfor %}
    {% endif %}

    <script src="{% static 'js/jquery-3.7.0.min.js' %}"></script> <!-- Jquery -->
    <script src="{% static 'js/jquery.mask.min.js' %}"></script> <!-- Jquery Mascara para campos -->

    {% block scripts %}

    {% endblock %}
</body>
</html>
